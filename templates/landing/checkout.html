{% extends "landing/base.html" %}
{% block content %}
{% load static %}
<div class="container mt-5">
  {% if form.errors %}
      {% for field in form %}
          {% for error in field.errors %}
              <p>{{ error }}</p>
          {% endfor %}
      {% endfor %}
  {% endif %}
  <form action="{% url 'checkout' %}" method="POST">
    <div class="row g-5 bg-hop-light mt-5">
      <div class="col-md-5 col-lg-4 order-md-last">
        <h4 class="d-flex justify-content-between align-items-center mb-3">
          <span class="hop-text-contrast-color">Корзина</span>
          <span class="badge hop-contrast-background-color rounded-pill">{{ cart.num_of_items }}</span>
        </h4>
        <ul class="list-group mb-3">
          {% for cartRow in cartRows %}
            <li class="list-group-item d-flex justify-content-between lh-sm">
              <div>
                <h6 class="my-0">{{ cartRow.product.name }}</h6>
                <small class="text-muted">{{ cartRow.product.description }}</small>
              </div>
              <span class="text-muted">{{ cartRow.price }} Тенге</span>
            </li>
          {% endfor %}
          <li class="list-group-item d-flex justify-content-between">
            <span>Всего (Тенге)</span>
            <strong>{{ cart.total_price }}</strong>
          </li>
        </ul>
        <div class="input-group mb-4">
          <button class="w-100 btn btn-hop btn-lg" type="submit">Оформить заказ</button>
        </div>
      </div>
      <div class="col-md-7 col-lg-8">
        <h4 class="mb-3 hop-text-contrast-color">Адрес доставки</h4>

          <div class="row g-3">
            <div class="col-sm-6">
              <label for="id_firstname" class="form-label hop-text-contrast-color">Имя</label>
              {{ form.firstname }}
            </div>

            <div class="col-sm-6">
              <label for="id_lastname" class="form-label hop-text-contrast-color">Фамилия</label>
              {{ form.lastname }}
            </div>

            <div class="col-6">
              <label for="id_email" class="form-label hop-text-contrast-color">Email</label>
              {{ form.email }}
            </div>

            <div class="col-6">
              <label for="id_delivery_address" class="form-label hop-text-contrast-color">Адрес</label>
              {{ form.delivery_address }}
            </div>
          </div>
          <h4 class="mb-3 hop-text-contrast-color">Оплата</h4>
          <div class="my-3">
            <div class="form-check">
              {{ form.pay_method }}
            </div>
          </div>
      </div>
      {% csrf_token %}
    </div>
  </form>
</div>

{% endblock %}